/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: Simple Platformer
@author: 
@tags: []
@addedOn: 2024-00-00
*/

const player = "p"
const block = "b"
const sky = "s"
const clouds = "c"
const obstacle = "o"
const lava = "l"

let currentPlayer;
let currentJumps = 0;
let maxJumps = 2;


setLegend(
  [ player, bitmap`
0000000000000000
0666666666666660
0666666666666660
0666000660006660
0666070660706660
0666000660006660
0666666666666660
0666666666666660
0600000000000060
0607777777777060
0600000000000060
0666666666666660
0666666666666660
0666666666666660
0666666666666660
0000000000000000`],
  [ block, bitmap `
0000000000000000
0909990999099990
0909990999099990
0000000000000000
0999099990999090
0999099990999090
0000000000000000
0909990999909990
0909990999909990
0000000000000000
0999099909999090
0999099909999090
0000000000000000
0909990999909990
0909990999909990
0000000000000000`],
  [ sky, bitmap `
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777`],
  [ clouds, bitmap`
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777772222227777
7772222222222777
7722222222222277
7222222222222227
7222222222222227
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777`],
  [ obstacle, bitmap`
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777L07777777
7777770000777777
7777700001077777
7777L00000007777
7770000000010777
7700000000000077
7000000000000007
010000000000000L`],
  [ lava, bitmap`
9999999999999999
9933999969999939
9999999966699999
9999999993669999
9666669999936699
9999996699993669
9999993669999999
9999999966999999
9996699993699999
3999366699999999
3399993669996699
9339999936699969
9999999993666999
9999999999999999
9993999933999999
9993999999999999`]
)

setSolids([])
setBackground(sky)

let level = 0
const levels = [
  map`
sssssssscss
scssscsssss
sscssssscss
ssssssssssc
ssssscsssss
sssssssssss
spssossosss
bbbbbbbbbbb
bbbbbbbbbbb`,
  map`
sscsssssssc
ssssssscsss
cssssssssss
sscsssssssc
ssbbbssbbss
sssssssssss
ssssossssos
bbbbbbbbbbb
bbbbbbbbbbb`,
  map`
sssssssssss
sssssssbbbb
sssssssssss
sssssbbssss
sssssssssss
sssbbssssss
sosssssssss
bbbllllllll
bbbllllllll`
]

setMap(levels[level])

setPushables({
  [ player ]: []
})

function jump() {
  getFirst(player).y -= 2
  setTimeout(() => {
    console.log(getFirst(player).y += 2);
  }, 100);
}
onInput("w", () => {
  jump()
})
onInput("a", () => {
  getFirst(player).x -= 1
})
onInput("d", () => {
  getFirst(player).x += 1
})
